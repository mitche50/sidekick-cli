# Contributing

This repo is meant to be your personal (or team) Sidekick module library. Here's how to keep it clean.

## Before you open a PR

- Keep changes focused -- one module per PR is ideal.
- Make sure module metadata and snippets are up to date.
- Run `sidekick build` to confirm nothing breaks.

## Adding a skill

1. Create a folder under `skills/`, named in kebab-case (gerund form preferred).
2. Add `SKILL.md` with required YAML frontmatter (`name`, `description`).
3. Add examples or templates as needed.
4. Add `sidekick.module.json`, `playbook.md`, and `snippets/kernel.md`.
5. Run `sidekick build` in a consuming repo to verify it compiles.
6. If you touch the kernel template, keep `templates/agents-md/kernel.md` and `packages/sidekick-core/templates/agents-md/kernel.md` in sync.

## Adding an adapter (core)

Adapters are generated by the core compiler so multiple tools can read the same `AGENTS.md`. To add a new adapter:

1. Add config flags under `adapters` in `defaultConfig()` and `validateConfig()` (`packages/sidekick-core/index.js`).
2. Add **preflight checks** in `writeAgentsOutputs()` before any writes:
   - verify paths are safe
   - verify existing files are managed (or require `adapters.force`)
   - verify required directories are valid
3. Add the **write** step in `writeAgentsOutputs()` after outputs are generated.
4. Update docs (`README.md`) and add/extend CI coverage in `.github/scripts/test-cli.js`.

## Safety

If your playbook suggests commands:
- Prefer read-only tooling first
- Avoid destructive operations by default
- Document exactly what each command does in `playbook.md`

See `docs/AUTHORING_GUIDE.md` for full conventions.
